#!/usr/bin/env zsh
set -euo pipefail

case "${1:-}" in
  repack|"")
    shift || true
    # prefer co-located script when installed via install.sh symlink
    if [ -f "$(dirname "$0")/repack_interactive.zsh" ]; then
      exec "$(dirname "$0")/repack_interactive.zsh" "$@"
    else
      exec "$(dirname "$0")/../repack_interactive.zsh" "$@"
    fi
    ;;
  --help|-h)
    echo "samplem - audio repacker"
    echo
    echo "Usage:"
    echo "  samplem              # repack (interactive by default)"
    echo "  samplem repack       # repack"
    echo "  samplem repack --path <dir> [--normalize true|false] [--trim true|false] [--layout keep|flat-prefix|flat]"
    echo "  samplem --version"
    exit 0
    ;;
  --version)
    echo "samplem v0.9.0"
    exit 0
    ;;
  *)
    echo "unknown subcommand: $1 (try --help)" >&2
    exit 1
    ;;
esac


